#!/bin/bash
set -euo pipefail
# This script installs the core tools needed for your environment
# It only runs once when initializing a new machine

{{ template "script_header.sh" . }}

{{ if eq .chezmoi.os "darwin" -}}
echo "Installing tools for macOS..."
if ! command -v brew &> /dev/null; then
  log_info "Installing Homebrew..."
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
  log_success "Homebrew has been installed."
else
  log_success "An existing Homebrew installation has been detected. Skippig install."
fi
{{ else if eq .chezmoi.os "linux" -}}
echo "Installing tools for Linux..."
if command -v apt-get &> /dev/null; then
  # For Debian/Ubuntu
  sudo apt-get update
  sudo apt-get install -y curl git build-essential
elif command -v dnf &> /dev/null; then
  # For Fedora/RHEL
  sudo dnf install -y curl git
elif command -v pacman &> /dev/null; then
  # For Arch
  sudo pacman -Syu --noconfirm curl git base-devel
fi
{{ end -}}
log_success "Core tools installation complete!"
echo "-------------------------------------------------------------------------------------------"
