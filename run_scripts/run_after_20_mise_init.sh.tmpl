#!/bin/bash
set -euo pipefail

{{ template "script_header.sh" . }}
source_env_file ~/.env

init_mise() {
  echo "Setting up the environment with mise..."
  eval "$(mise activate bash)"
  echo "Upgrading all mise tools..."
  mise upgrade --yes 2>&1 | sed -E 's|^(.*)|    \1|g'
  echo "Display installed mise tools..."
  mise ls 2>&1 | sed -E 's|^(.*)|    \1|g'
  echo "Done!"
}

init_mise
log_success "Mise setup completed successfully!"
echo "-------------------------------------------------------------------------------------------"
